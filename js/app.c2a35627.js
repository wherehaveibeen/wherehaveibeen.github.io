(function(t){function e(e){for(var i,o,n=e[0],l=e[1],c=e[2],d=0,h=[];d<n.length;d++)o=n[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&h.push(a[o][0]),a[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);u&&u(e);while(h.length)h.shift()();return r.push.apply(r,c||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],i=!0,n=1;n<s.length;n++){var l=s[n];0!==a[l]&&(i=!1)}i&&(r.splice(e--,1),t=o(o.s=s[0]))}return t}var i={},a={app:0},r=[];function o(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=i,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(s,i,function(e){return t[e]}.bind(null,i));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var u=l;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var i=s("85ec"),a=s.n(i);a.a},"038d":function(t,e,s){"use strict";var i=s("6683"),a=s.n(i);a.a},"0eb1":function(t,e,s){"use strict";var i=s("c1e9"),a=s.n(i);a.a},2647:function(t,e,s){"use strict";var i=s("7061"),a=s.n(i);a.a},"26b9":function(t,e,s){"use strict";var i=s("a704"),a=s.n(i);a.a},"2ca0":function(t,e,s){"use strict";var i=s("edf0"),a=s.n(i);a.a},"2d78":function(t,e,s){},"310d":function(t,e,s){"use strict";var i=s("2d78"),a=s.n(i);a.a},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var i=s("2b0e"),a=s("2f62"),r=s("bfa9"),o={userAuth:void 0,userId:void 0,userStatus:void 0},n={storeUserAuth:function(t,e){t.commit("setUserAuth",e)},storeUserId:function(t,e){t.commit("setUserId",e)},storeUserStatus:function(t,e){t.commit("setUserStatus",e)}},l={setUserAuth:function(t,e){t.userAuth=e},setUserId:function(t,e){t.userId=e},setUserStatus:function(t,e){t.userStatus=e}},c={getUserAuth:function(t){return void 0!==t.userAuth},getUserToken:function(t){return t.userAuth},getUserId:function(t){return t.userId},getUserStatus:function(t){return t.userStatus}};i["default"].use(a["a"]);var u=new r["a"]({key:"vuex",storage:window.localStorage}),d=new a["a"].Store({state:o,actions:n,mutations:l,getters:c,plugins:[u.plugin]}),h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("NavigationBar",{attrs:{userLoggedIn:this.userLoggedIn,dangerMapDisplayed:this.showDangerMap},on:{displayCheckIn:function(e){return t.displayCheckinForm()},displayHistory:function(e){return t.displayHistory()},toggleDangerMap:function(e){return t.toggleDangerMap()},displaySettings:function(e){return t.displaySettings()}}}),s("Welcome",{directives:[{name:"show",rawName:"v-show",value:!this.userLoggedIn&&!this.showDangerMap,expression:"!this.userLoggedIn && !this.showDangerMap"}]}),s("b-card",{directives:[{name:"show",rawName:"v-show",value:!this.userLoggedIn&&!this.showDangerMap,expression:"!this.userLoggedIn && !this.showDangerMap"}],attrs:{"no-body":"",id:"user-auth-actons"}},[s("b-tabs",{attrs:{card:""}},[s("b-tab",{ref:"loginTab",attrs:{title:"Login",id:"login-form-card"}},[s("LoginForm")],1),s("b-tab",{attrs:{title:"Register",id:"register-form-card"}},[s("RegisterForm",{on:{registrationComplete:function(e){return t.registrationComplete()}}})],1)],1)],1),s("Confidentiality",{directives:[{name:"show",rawName:"v-show",value:!this.userLoggedIn&&!this.showDangerMap,expression:"!this.userLoggedIn && !this.showDangerMap"}]}),s("CheckIn",{directives:[{name:"show",rawName:"v-show",value:this.userLoggedIn&&this.showCheckin,expression:"this.userLoggedIn && this.showCheckin"}],staticClass:"authed-user"}),s("CheckInHistory",{directives:[{name:"show",rawName:"v-show",value:this.userLoggedIn&&this.showHistory,expression:"this.userLoggedIn && this.showHistory"}],staticClass:"authed-user"}),s("RiskyHistory",{directives:[{name:"show",rawName:"v-show",value:this.showDangerMap,expression:"this.showDangerMap"}],staticClass:"authed-user"}),s("Settings",{directives:[{name:"show",rawName:"v-show",value:this.userLoggedIn&&this.showSettings,expression:"this.userLoggedIn && this.showSettings"}],staticClass:"authed-user"})],1)},p=[],m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mb-5",attrs:{id:"nav-bar-container"}},[s("b-navbar",{attrs:{toggleable:"md",type:"dark",variant:"dark"}},[s("b-navbar-brand",{attrs:{href:"#"},on:{click:function(e){return t.$emit("displayCheckIn")}}},[t._v("Where Have I Been?")]),s("b-navbar-toggle",{attrs:{target:"nav-app-menu"}},[s("font-awesome-icon",{attrs:{icon:"bars"}})],1),s("b-collapse",{attrs:{"is-nav":"",id:"nav-app-menu"}},[s("b-navbar-nav",{staticClass:"ml-auto"},[s("b-button",{staticClass:"ml-2 mr-2",attrs:{id:"covid-history-btn"},on:{click:function(e){return t.$emit("toggleDangerMap")}}},[t._v(" "+t._s(t.dangerMapDisplayed?"Hide":"Show")+" Report Map ")]),s("b-button",{directives:[{name:"show",rawName:"v-show",value:t.userLoggedIn,expression:"userLoggedIn"}],staticClass:"ml-2 mr-2",attrs:{id:"covid-report-btn",variant:"danger"},on:{click:function(e){return t.$bvModal.show("covid-modal")}}},[t._v(" I Have Symptoms ")]),s("b-nav-item-dropdown",{directives:[{name:"show",rawName:"v-show",value:t.userLoggedIn,expression:"userLoggedIn"}],attrs:{text:"Account",right:""}},[s("b-dropdown-item",{on:{click:function(e){return t.$emit("displayHistory")}}},[t._v("History")]),s("b-dropdown-item",{on:{click:function(e){return t.$emit("displaySettings")}}},[t._v("Settings")]),s("b-dropdown-item",{on:{click:t.onUserLogout}},[t._v("Log Out")])],1)],1)],1)],1),s("b-modal",{ref:"covid-modal",attrs:{id:"covid-modal","hide-header":"","hide-footer":""}},[s("CovidModal",{on:{confirmReport:function(e){return t.confirmReport()},cancelReport:function(e){return t.cancelReport()}}})],1)],1)},f=[],v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"covid-modal-container"}},[s("h2",[t._v("COVID-19 Reporting")]),s("h3",[t._v("The Symptoms")]),t._m(0),s("h3",[t._v("What you need to do now:")]),t._m(1),s("h3",[t._v("What we will do:")]),t._m(2),s("div",{attrs:{id:"modal-btn"}},[s("b-button",{attrs:{variant:"outline-danger"},on:{click:function(e){return t.cancelReport()}}},[t._v("Cancel")]),s("b-button",{attrs:{variant:"danger"},on:{click:function(e){return t.confirmReport()}}},[t._v("Confirm")])],1)])},g=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[t._v("Fever / High Temperature")]),s("li",[t._v("New, continuous dry cough")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[t._v("Confirm or cancel your report with the buttons at the bottom")]),s("li",[t._v("Self-Isolate immediately")]),s("li",[t._v("Check your check in history to make sure it is up-to-date")]),s("li",[t._v("Check local government advice and guidelines")]),s("li",[t._v("Get well soon")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[t._v("Anonymously alert other users who may have crossed paths with you in the last 14 days")])])}],b={name:"CovidModal",methods:{confirmReport:function(){this.$emit("confirmReport")},cancelReport:function(){this.$emit("cancelReport")}}},w=b,y=(s("2647"),s("2877")),k=Object(y["a"])(w,v,g,!1,null,"4087d350",null),_=k.exports,C={name:"NavigationBar",components:{CovidModal:_},props:["userLoggedIn","dangerMapDisplayed"],data:function(){return{expanded:!1,api:{endpoint:"https://wherehaveibeen.azurewebsites.net",responses:[],errors:[]}}},methods:{onUserLogout:function(t){t.preventDefault(),this.$store.dispatch("storeUserAuth",void 0),this.$store.dispatch("storeUserId",void 0)},confirmReport:function(){var t=this;this.$refs["covid-modal"].hide();var e=this.$store.getters.getUserToken,s={userId:this.$store.getters.getUserId,IsAtRisk:!0};this.$http.post(this.api.endpoint+"/membership/corona",s,{headers:{Authorization:"Bearer "+e}}).then((function(e){t.api.responses.push(e)})).catch((function(e){t.api.errors.push(e)}))},cancelReport:function(){this.$refs["covid-modal"].hide()}}},I=C,S=(s("038d"),Object(y["a"])(I,m,f,!1,null,"b943edaa",null)),A=S.exports,x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"login-form-container"}},[s("b-alert",{attrs:{variant:"danger"},model:{value:t.alerts.invalidCredentials,callback:function(e){t.$set(t.alerts,"invalidCredentials",e)},expression:"alerts.invalidCredentials"}},[t._v(" The email / password are incorrect ")]),s("b-form",{on:{submit:t.onLoginSubmit}},[s("b-container",{attrs:{fluid:""}},[s("b-row",[s("b-col",{attrs:{cols:"12"}},[s("b-form-group",{attrs:{id:"email-input-group",label:"Email Address:","label-for":"email-input"}},[s("b-form-input",{attrs:{id:"email-input",type:"email",required:"",autocomplete:"username",state:t.fieldState.login},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1)],1)],1),s("b-row",[s("b-col",{attrs:{cols:"12"}},[s("b-form-group",{attrs:{id:"password-input-group",label:"Password:","label-for":"password-input"}},[s("b-form-input",{attrs:{id:"password-input",type:"password",required:"",autocomplete:"current-password",state:t.fieldState.login},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1)],1)],1)],1),s("b-button",{staticClass:"login-form-btn",attrs:{id:"login-form-submit-btn",variant:"primary",type:"submit"}},[t._v("Login")])],1)],1)},P=[],$={name:"LoginForm",data:function(){return{api:{endpoint:"https://wherehaveibeen.azurewebsites.net",errors:[]},alerts:{invalidCredentials:!1},fieldState:{login:null},form:{email:"",password:""}}},methods:{clearFields:function(){this.form.email="",this.form.password=""},clearAlerts:function(){this.alerts.invalidCredentials=!1,this.fieldState.login=null},onLoginSubmit:function(t){var e=this;t.preventDefault(),this.clearAlerts();var s={Username:this.form.email,Password:this.form.password};this.$http.post(this.api.endpoint+"/membership/login",s).then((function(t){e.clearFields(),e.clearAlerts(),e.$store.dispatch("storeUserAuth",t.data.token),e.$store.dispatch("storeUserId",t.data.userId)})).catch((function(t){e.alerts.invalidCredentials=!0,e.fieldState.login=!1,e.api.errors.push(t)}))}}},D=$,M=(s("c0e3"),Object(y["a"])(D,x,P,!1,null,"0de3662c",null)),U=M.exports,N=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"register-form-container"}},[s("b-alert",{attrs:{variant:"danger"},model:{value:t.validationAlerts.emailNotMatch,callback:function(e){t.$set(t.validationAlerts,"emailNotMatch",e)},expression:"validationAlerts.emailNotMatch"}},[t._v(" The emails do not match ")]),s("b-alert",{attrs:{variant:"danger"},model:{value:t.validationAlerts.emailNotUnique,callback:function(e){t.$set(t.validationAlerts,"emailNotUnique",e)},expression:"validationAlerts.emailNotUnique"}},[t._v(" This email is already registered ")]),s("b-alert",{attrs:{variant:"danger"},model:{value:t.validationAlerts.passwordNotMatch,callback:function(e){t.$set(t.validationAlerts,"passwordNotMatch",e)},expression:"validationAlerts.passwordNotMatch"}},[t._v(" The passwords do not match ")]),s("b-alert",{attrs:{variant:"danger"},model:{value:t.validationAlerts.policyNotChecked,callback:function(e){t.$set(t.validationAlerts,"policyNotChecked",e)},expression:"validationAlerts.policyNotChecked"}},[t._v(" You must agree to the Privacy Policy ")]),s("b-form",{on:{submit:t.onRegisterSubmit}},[s("b-container",{attrs:{fluid:""}},[s("b-row",[s("b-col",{attrs:{col:"",cols:"12",sm:"12",md:"12",lg:"6",xl:"6"}},[s("b-form-group",{attrs:{id:"new-email-input-group",label:"Email Address:","label-for":"new-email-input"}},[s("b-form-input",{attrs:{id:"new-email-input",type:"email",required:"",autocomplete:"username",state:t.fieldStatus.email},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1)],1),s("b-col",{attrs:{col:"",cols:"12",sm:"12",md:"12",lg:"6",xl:"6"}},[s("b-form-group",{attrs:{id:"email-validate-input-group",label:"Verify Email Address:","label-for":"email-validate-input"}},[s("b-form-input",{attrs:{id:"email-validate-input",type:"email",required:"",state:t.fieldStatus.email},model:{value:t.form.emailVerify,callback:function(e){t.$set(t.form,"emailVerify",e)},expression:"form.emailVerify"}})],1)],1)],1),s("b-row",[s("b-col",{attrs:{col:"",cols:"12",sm:"12",md:"12",lg:"6",xl:"6"}},[s("b-form-group",{attrs:{id:"new-password-input-group",label:"Password:","label-for":"new-password-input"}},[s("b-form-input",{attrs:{id:"new-password-input",type:"password",required:"",autocomplete:"new-password",state:t.fieldStatus.password},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1)],1),s("b-col",{attrs:{col:"",cols:"12",sm:"12",md:"12",lg:"6",xl:"6"}},[s("b-form-group",{attrs:{id:"password-validate-input-group",label:"Verify Password:","label-for":"password-validate-input"}},[s("b-form-input",{attrs:{id:"password-validate-input",type:"password",required:"",state:t.fieldStatus.password},model:{value:t.form.passwordVerify,callback:function(e){t.$set(t.form,"passwordVerify",e)},expression:"form.passwordVerify"}})],1)],1)],1),s("b-row",[s("b-col",{attrs:{cols:"12"}},[s("b-form-checkbox",{attrs:{id:"priv-pol-check",name:"priv-pol-check",value:"true","unchecked-value":"false",state:t.fieldStatus.policy},model:{value:t.form.privacyPolicy,callback:function(e){t.$set(t.form,"privacyPolicy",e)},expression:"form.privacyPolicy"}},[t._v(" I accept the "),s("a",{attrs:{href:"/privacyPolicy.html",target:"_blank"}},[t._v("Privacy Policy")])])],1)],1)],1),s("b-button",{staticClass:"register-form-btn",attrs:{id:"register-form-submit-btn",variant:"primary",type:"submit"}},[t._v("Register")])],1)],1)},T=[],L={name:"RegisterForm",data:function(){return{api:{endpoint:"https://wherehaveibeen.azurewebsites.net",responses:[],errors:[]},validationAlerts:{emailNotMatch:!1,emailNotUnique:!1,passwordNotMatch:!1,policyNotChecked:!1},fieldStatus:{email:null,password:null,policy:null},form:{email:"",emailVerify:"",password:"",passwordVerify:"",privacyPolicy:!1}}},methods:{clearFields:function(){this.form.email="",this.form.emailVerify="",this.form.password="",this.form.passwordVerify="",this.form.privacyPolicy=!1},clearAlerts:function(){this.validationAlerts.emailNotMatch=!1,this.validationAlerts.emailNotUnique=!1,this.validationAlerts.passwordNotMatch=!1,this.validationAlerts.policyNotChecked=!1,this.fieldStatus.email=null,this.fieldStatus.password=null,this.fieldStatus.policy=null},onRegisterSubmit:function(t){var e=this;if(t.preventDefault(),this.clearAlerts(),this.form.email!==this.form.emailVerify)this.clearAlerts(),this.fieldStatus.email=!1,this.validationAlerts.emailNotMatch=!0;else if(this.form.password!==this.form.passwordVerify)this.fieldStatus.password=!1,this.validationAlerts.passwordNotMatch=!0;else if(this.form.privacyPolicy&&"false"!==this.form.privacyPolicy){var s={Username:this.form.email,Email:this.form.email,Password:this.form.password};this.$http.post(this.api.endpoint+"/membership",s).then((function(t){e.api.responses.push(t),e.clearFields(),e.clearAlerts(),e.$emit("registrationComplete")})).catch((function(t){e.fieldStatus.email=!1,e.validationAlerts.emailNotUnique=!0,e.api.errors.push(t)}))}else this.fieldStatus.policy=!1,this.validationAlerts.policyNotChecked=!0}}},R=L,O=(s("0eb1"),Object(y["a"])(R,N,T,!1,null,"0cdc8619",null)),H=O.exports,F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"check-in-container"}},[s("h2",[t._v("Where did you go today?")]),s("div",{staticClass:"instruction"},[t._v(" Search our map, tell us when and hit 'Check In' ")]),s("gmap-autocomplete",{ref:"autocomplete",staticStyle:{width:"75%"},attrs:{placeholder:"Search for a place","select-first-on-enter":!0},on:{place_changed:t.setPlace}}),s("span",{attrs:{id:"disabled-btn-wrapper"}},[s("b-button",{directives:[{name:"show",rawName:"v-show",value:!this.locatingUser,expression:"!this.locatingUser"}],staticClass:"ml-3",attrs:{disabled:!this.hideGeolocateToolTip,size:"sm",id:"user-location-btn"},on:{click:function(e){return t.geolocate()}}},[t._v("Find Me")])],1),s("b-tooltip",{attrs:{disabled:this.hideGeolocateToolTip,target:"disabled-btn-wrapper",placement:"top"}},[t._v(" Failed to find your location"),s("br"),t._v(" Please check your Browser's permissions ")]),s("b-button",{directives:[{name:"show",rawName:"v-show",value:this.locatingUser,expression:"this.locatingUser"}],staticClass:"ml-3",attrs:{disabled:"",size:"sm"}},[s("b-spinner",{attrs:{small:""}})],1),s("p"),this.currentPlace?s("div",{attrs:{id:"search-result"}},[s("b-card",{staticClass:"overflow-hidden",attrs:{"no-body":""}},[s("b-row",{attrs:{"no-gutters":""}},[s("b-col",{attrs:{md:"6"}},[s("gmap-map",{ref:"map",staticStyle:{width:"100%",height:"500px"},attrs:{center:t.center,zoom:t.zoomLevel,options:t.mapOptions},on:{click:t.clickedOnMap}},[s("gmap-marker",{attrs:{position:t.center}})],1)],1),s("b-col",{attrs:{md:"6"}},[s("b-card-body",{staticClass:"d-flex align-items-start flex-column bd-highlight",class:{"danger-container":t.filteredDangers.length>0},staticStyle:{height:"100%"}},[s("div",{staticClass:"place-container"},[this.userIsSick?s("div",{staticClass:"at-risk"},[s("font-awesome-icon",{attrs:{icon:"biohazard"}}),t._v(" At Risk ")],1):t._e(),this.currentPlace.name?s("div",{staticClass:"title"},[t._v(" "+t._s(this.currentPlace.name)+" ")]):t._e(),this.currentPlace.name?t._e():s("div",[s("div",{staticClass:"title"},[t._v(" You chose an unknown place ")]),s("label",{attrs:{for:"newPlaceName"}},[t._v("Name this place:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.unknownPlaceName,expression:"unknownPlaceName"}],attrs:{id:"newPlaceName",type:"text"},domProps:{value:t.unknownPlaceName},on:{input:function(e){e.target.composing||(t.unknownPlaceName=e.target.value)}}})]),s("div",{staticClass:"bd-highlight"},[t._v(" "+t._s(this.currentPlace.formatted_address)+" ")])]),s("div",{staticClass:"mb-auto bd-highlight"},[s("b-row",{attrs:{id:"datetime-pickers"}},[s("b-col",{attrs:{md:"6"}},[s("b-form-datepicker",{staticClass:"mb-3",attrs:{id:"checkin-datepicker",placeholder:t.formattedDate(),"date-format-options":{year:"numeric",month:"numeric",day:"numeric"},"today-button":""},model:{value:t.checkInDate,callback:function(e){t.checkInDate=e},expression:"checkInDate"}})],1),s("b-col",{attrs:{md:"6"}},[s("b-form-timepicker",{staticClass:"mb-3",attrs:{id:"checkin-timepicker",placeholder:t.formattedTime(),"now-button":""},model:{value:t.checkInTime,callback:function(e){t.checkInTime=e},expression:"checkInTime"}})],1)],1)],1),s("div",{staticClass:"bd-highlight"},[s("b-row",{staticClass:"align-self-end",attrs:{id:"submit-alert"}},[s("b-alert",{attrs:{dismissible:"",variant:"success"},model:{value:t.showSuccessAlert,callback:function(e){t.showSuccessAlert=e},expression:"showSuccessAlert"}},[t._v(" This location has been stored ")]),s("b-alert",{attrs:{dismissible:"",variant:"danger"},model:{value:t.showFailureAlert,callback:function(e){t.showFailureAlert=e},expression:"showFailureAlert"}},[t._v(" Failed to store this Check In."),s("br"),t._v(" Please refresh or try again later ")])],1)],1),s("b-row",{staticClass:"align-self-end",attrs:{id:"submit-btn"}},[s("b-button",{on:{click:function(e){return t.onCheckInSubmit()}}},[t._v("Check In")])],1),t.filteredDangers.length>0?s("div",{staticClass:"mb-auto bd-highlight dangerous-checkins"},[s("span",{staticClass:"title"},[t._v("This place could be contagious")]),t._l(t.filteredDangers,(function(e,i){return s("b-row",{key:i,class:{even:i%2==0,odd:i%2>0},attrs:{"no-gutters":""}},[s("b-row",[s("b-col",{attrs:{md:"6"}},[s("span",[t._v(t._s(e.Distance)+" meters away")])])],1),s("b-row",[s("span",[t._v(t._s(e.CheckIn)+" - "+t._s(e.CheckOut))])])],1)}))],2):t._e()],1)],1)],1)],1)],1):t._e()],1)},z=[],V=(s("c975"),s("a15b"),s("d81d"),s("b0c0"),s("d3b7"),s("25f0"),s("4d90"),s("755e")),E={name:"CheckIn",data:function(){return{api:{endpoint:"https://wherehaveibeen.azurewebsites.net",responses:[],errors:[]},mapOptions:{mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1,zoomControl:!1},center:{lat:0,lng:0},zoomLevel:7,autoCompleteQuery:"",currentPlace:null,unknownPlaceName:null,locatingUser:!1,checkInDate:this.formattedDate(),checkInTime:this.formattedTime(),showSuccessAlert:!1,showFailureAlert:!1,hideGeolocateToolTip:!0,dangers:[],filteredDangers:[]}},mounted:function(){this.timeoutGeoLocate()},computed:{google:V["gmapApi"],userAuth:function(){return this.$store.getters.getUserAuth},userIsSick:function(){return"corona"===this.$store.getters.getUserStatus}},watch:{userAuth:function(){this.clearMapQuery(),this.currentPlace=null}},methods:{clearMapQuery:function(){this.$refs["autocomplete"].$el.value=""},formattedDate:function(){var t=new Date;return t.getFullYear()+"-"+(t.getMonth()+1).toString().padStart(2,"0")+"-"+t.getDate().toString().padStart(2,"0")},formattedTime:function(){var t=new Date;return t.getHours().toString().padStart(2,"0")+":"+t.getMinutes().toString().padStart(2,"0")+":"+t.getSeconds().toString().padStart(2,"0")},getPosition:function(t){return{lat:parseFloat(t.lat),lng:parseFloat(t.lng)}},setPlace:function(t){this.currentPlace=t,this.zoomLevel=16,this.center.lat=this.currentPlace.geometry.location.lat(),this.center.lng=this.currentPlace.geometry.location.lng(),this.onGetRiskyVisits()},timeoutGeoLocate:function(){var t=this;this.geolocate(),setTimeout((function(){t.locatingUser&&(t.locatingUser=!1,t.hideGeolocateToolTip=!1)}),1e4)},geolocate:function(){var t=this;this.locatingUser=!0,navigator.geolocation.getCurrentPosition((function(e){t.zoomLevel=16,t.center={lat:e.coords.latitude,lng:e.coords.longitude},t.currentPlace={name:"Your current location",lat:e.coords.latitude,lng:e.coords.longitude},t.locatingUser=!1,t.clearMapQuery()}))},clickedOnMap:function(t){var e=this;this.unknownPlaceName=null,this.center.lat=t.latLng.lat(),this.center.lng=t.latLng.lng(),t.placeId?this.$refs.map.$mapPromise.then((function(s){var i={placeId:t.placeId,fields:["place_id","name","formatted_address"]},a=new e.google.maps.places.PlacesService(s);a.getDetails(i,(function(t){return e.currentPlace=t}))})):this.currentPlace={}},onCheckInSubmit:function(){var t=this,e=this.$store.getters.getUserToken,s=this.currentPlace&&this.currentPlace.place_id,i=this.currentPlace&&this.currentPlace.name,a=this.currentPlace&&this.currentPlace.formatted_address,r={userId:this.$store.getters.getUserId,latitude:this.center.lat,longitude:this.center.lng,placeId:s||"",placeName:i||this.unknownPlaceName||"",address:a||"",checkin:[this.checkInDate,this.checkInTime].join("T")};this.$http.post(this.api.endpoint+"/visit",r,{headers:{Authorization:"Bearer "+e}}).then((function(e){t.showFailureAlert=!1,t.showSuccessAlert=!0,setTimeout((function(){t.showSuccessAlert=!1}),3e3),t.api.responses.push(e)})).catch((function(e){t.showSuccessAlert=!1,t.showFailureAlert=!0,setTimeout((function(){t.showFailureAlert=!1}),3e3),t.api.errors.push(e)}))},onGetRiskyVisits:function(){var t=this,e=this.$store.getters.getUserId,s=this.center.lat,i=this.center.lng;this.$http.get(this.api.endpoint+"/risk/visit?userId="+e+"&lat="+s+"&lng="+i).then((function(e){t.dangers=e.data,t.filterRisk(t.checkInDate)}))},filterRisk:function(t){if(void 0!==t){for(var e=[],s=0;s<this.dangers.length;s++){var i=this.dangers[s];i.CheckIn.indexOf(t)>-1&&e.push(i)}this.$set(this,"filteredDangers",this.dangers)}},dateChanged:function(){this.filterRisk(this.checkInDate)}}},j=E,G=(s("2ca0"),Object(y["a"])(j,F,z,!1,null,"66760672",null)),B=G.exports,W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"checkin-history-container"}},[s("div",{staticClass:"d-flex mb-4",attrs:{id:"title-bar"}},[t._m(0),s("div",{staticClass:"ml-auto d-flex justify-content-end",attrs:{id:"title-text"}},[s("b-button",{attrs:{id:"refresh-button"},on:{click:function(e){return t.loadHistory()}}},[t._v("Refresh")])],1)]),t._l(this.locations,(function(e){return s("b-card",{key:e.VisitId,staticClass:"location-card overflow-hidden mb-2",attrs:{title:e.Address,"no-body":""}},[s("b-row",{attrs:{"no-gutters":""}},[s("b-col",{attrs:{md:"6"}},[s("gmap-map",{staticStyle:{width:"100%",height:"200px"},attrs:{center:t.findCenter(e),zoom:t.zoomLevel,options:t.mapOptions}},[s("gmap-marker",{attrs:{position:t.findCenter(e)}})],1)],1),s("b-col",{attrs:{md:"6"}},[s("b-card-body",[s("b-row",{attrs:{"no-gutters":""}},[s("b-col",{staticClass:"history-text"},[s("h4",[t._v(t._s(e.PlaceName))])]),s("b-col",{staticClass:"risk-label",attrs:{sm:"3"}},[e.AtRisk?s("span",{staticClass:"at-risk"},[s("font-awesome-icon",{attrs:{icon:"biohazard"}}),t._v(" Infectious ")],1):t._e(),t.potentialRisk(e)?s("span",{staticClass:"risky"},[s("font-awesome-icon",{attrs:{icon:"virus"}}),t._v(" Potential Risk ")],1):t._e(),e.AtRisk||0!==e.RiskyInteractions?t._e():s("span",[s("font-awesome-icon",{attrs:{icon:"hand-sparkles"}}),t._v(" Low Risk ")],1)])],1),s("div",{staticClass:"history-text"},[t._v(t._s(e.Address))]),s("div",{staticClass:"history-text"},[t._v(t._s(t.dateFormatter(e.CheckIn)))]),t.potentialRisk(e)?s("div",{staticClass:"d-flex flex-column align-content-end"},[s("div",{staticClass:"d-flex flex-row-reverse"},[s("b-button",{staticClass:"ml-1 mr-1",attrs:{variant:"link",id:"covid-interaction-btn"},on:{click:function(s){return t.toggleShowRiskyEncounters(e)}}},[t._v(" "+t._s(e.showRiskyEncounters?"Hide":"Show")+" "+t._s(e.RiskyInteractions)+" risky encounter"+t._s(e.RiskyInteractions>1?"s":"")+" ")])],1)]):t._e(),e.showRiskyEncounters?s("div",{staticClass:"risky-text"},t._l(e.details,(function(e){return s("span",{key:e.VisitId},[s("div",{staticClass:"label"},[t._v("Someone with symptoms was here at:")]),s("div",{staticClass:"text"},[s("div",{staticClass:"label"},[t._v("Checked in:")]),t._v(t._s(t.dateFormatter(e.checkIn)))]),s("div",{staticClass:"text"},[s("div",{staticClass:"label"},[t._v("Checked out:")]),t._v(t._s(t.dateFormatter(e.checkOut)))]),s("div",{staticClass:"text"},[t._v(t._s(t.formatDistance(e)))])])})),0):t._e()],1)],1)],1)],1)}))],2)},Y=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-flex justify-content-center",attrs:{id:"title-text"}},[s("h2",[t._v("Check-In History")])])}],q={name:"CheckInHistory",data:function(){return{api:{endpoint:"https://wherehaveibeen.azurewebsites.net",errors:[]},mapOptions:{mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1,zoomControl:!1},locations:[],zoomLevel:14}},computed:{currentUserId:function(){return this.$store.getters.getUserId}},watch:{currentUserId:function(){this.loadHistory()}},mounted:function(){this.loadHistory()},methods:{loadHistory:function(){var t=this,e=this.currentUserId;void 0!==e&&this.$http.get(this.api.endpoint+"/visit?userId="+e).then((function(e){t.locations=e.data.reverse()})).catch((function(e){t.api.errors.push(e)}))},findCenter:function(t){return{lat:t.Latitude,lng:t.Longitude}},dateFormatter:function(t){return new Date(Date.parse(t))},getDetails:function(t){var e=this;t.data&&t.data.length>0||this.$http.get(this.api.endpoint+"/visit/risk?visitId="+t.VisitId).then((function(s){s.data&&s.data.length>0&&e.$set(t,"details",s.data)})).catch((function(t){e.api.errors.push(t)}))},toggleShowRiskyEncounters:function(t){var e=!t.showRiskyEncounters;this.$set(t,"showRiskyEncounters",e),e&&this.getDetails(t)},potentialRisk:function(t){return!t.AtRisk&&t.RiskyInteractions>0},formatDistance:function(t){return t.distanceInKm>0?"Approximately ".concat(t.distanceInKm," metres away"):""}}},Q=q,J=(s("fd1d"),Object(y["a"])(Q,W,Y,!1,null,"d9c102b0",null)),K=J.exports,X=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",[s("h1",[t._v("Where Have I Been?")]),s("p",[t._v(" Help stop the spread of COVID-19 by checking-in to locations you've visited in the recent past. "),s("br"),t._v(" If you've contracted COVID-19 symptoms we will let others know that they are at risk if they visited the same locations as you. "),s("br"),t._v(" Let's work together to stop the spread! ")]),s("p",[t._v(" Login or register for an account to get started. ")])])},Z=[],tt={},et=Object(y["a"])(tt,X,Z,!1,null,null,null),st=et.exports,it=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-container",[s("p",[t._v(" Your information will remain private and confidential. Read more in our "),s("a",{attrs:{href:"/privacyPolicy.html",target:"_blank"}},[t._v("Privacy Policy")]),t._v(". ")])])},at=[],rt={},ot=Object(y["a"])(rt,it,at,!1,null,null,null),nt=ot.exports,lt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"settings-container"}},[s("h2",[t._v("Account Settings")]),s("b-card",{staticClass:"account-setting-card",attrs:{title:"Clear your history"}},[s("b-card-body",[t._v(" This section will remove all the check ins from your account."),s("br"),t._v(" We don't like to see this used as we rely on check in data to power Where Have I Been? "),s("p"),t._v(" But if you still want to, click away "),s("p"),s("b-button",{attrs:{variant:"outline-dark"},on:{click:function(e){return t.onHistoryDelete()}}},[t._v("Clear My History")])],1)],1),s("b-card",{staticClass:"account-setting-card",attrs:{title:"Delete your account"}},[s("b-card-body",[t._v(" This section will clear all the information about you and your check ins and remove your account."),s("br"),t._v(" We'd love to keep you on board and help keep you safe, which will require an account. "),s("p"),t._v(" But if you still want to, click away - there's nothing stopping you making a new one! "),s("p"),s("b-button",{attrs:{variant:"outline-danger"},on:{click:function(e){return t.onAccountDelete()}}},[t._v("Delete My Account")])],1)],1)],1)},ct=[],ut={name:"Settings",data:function(){return{api:{endpoint:"https://wherehaveibeen.azurewebsites.net",responses:[],errors:[]}}},methods:{onHistoryDelete:function(){var t=this;this.$bvModal.msgBoxConfirm("Are you sure you want to delete your history?",{title:"Clear Your History",okVariant:"dark",okTitle:"Yes",cancelVariant:"outline-dark",cancelTitle:"No",hideHeaderClose:!1,centered:!0}).then((function(e){if(e){var s={},i=t.$store.getters.getUserId,a=t.$store.getters.getUserToken;t.$http.post(t.api.endpoint+"/visit/delete/"+i,s,{headers:{Authorization:"Bearer "+a}}).then((function(e){t.api.reponses.push(e)})).catch((function(e){t.api.errors.push(e)}))}})).catch((function(e){t.api.errors.push(e)}))},onAccountDelete:function(){var t=this;this.$bvModal.msgBoxConfirm("Are you sure you want to delete your account?",{title:"Delete Your Account",okVariant:"danger",okTitle:"Yes",cancelVariant:"outline-danger",cancelTitle:"No",hideHeaderClose:!1,centered:!0}).then((function(e){if(e){var s={},i=t.$store.getters.getUserId,a=t.$store.getters.getUserToken;t.$http.post(t.api.endpoint+"/membership/delete/"+i,s,{headers:{Authorization:"Bearer "+a}}).then((function(e){t.$store.dispatch("storeUserAuth",void 0),t.$store.dispatch("storeUserId",void 0),t.api.reponses.push(e)})).catch((function(e){t.api.errors.push(e)}))}})).catch((function(e){t.api.errors.push(e)}))}}},dt=ut,ht=(s("26b9"),Object(y["a"])(dt,lt,ct,!1,null,"70214a5e",null)),pt=ht.exports,mt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"danger-map-container"}},[s("h2",[t._v("Locations at risk")]),s("gmap-autocomplete",{ref:"autocomplete",staticStyle:{width:"75%"},attrs:{placeholder:"Search for a place","select-first-on-enter":!0},on:{place_changed:t.setPlace}}),s("span",{attrs:{id:"disabled-btn-wrapper"}},[s("b-button",{directives:[{name:"show",rawName:"v-show",value:!this.locatingUser,expression:"!this.locatingUser"}],staticClass:"ml-3",attrs:{disabled:!this.hideGeolocateToolTip,size:"sm",id:"user-location-btn"},on:{click:function(e){return t.timeoutGeoLocate()}}},[t._v("Find Me")])],1),s("b-tooltip",{attrs:{disabled:this.hideGeolocateToolTip,target:"disabled-btn-wrapper",placement:"top"}},[t._v(" Failed to find your location"),s("br"),t._v(" Please check your Browser's permissions ")]),s("b-button",{directives:[{name:"show",rawName:"v-show",value:this.locatingUser,expression:"this.locatingUser"}],staticClass:"ml-3",attrs:{disabled:"",size:"sm"}},[s("b-spinner",{attrs:{small:""}})],1),s("p"),this.currentPlace?s("div",{attrs:{id:"search-result"}},[s("b-card",{staticClass:"overflow-hidden",attrs:{"no-body":""}},[s("b-row",{attrs:{"no-gutters":""}},[s("b-col",{staticStyle:{width:"90%"}},[s("gmap-map",{staticStyle:{width:"100%",height:"500px"},attrs:{center:t.center,zoom:t.zoomLevel,options:t.mapOptions},on:{click:t.clickedOnMap}},t._l(t.coords,(function(e,i){return s("gmap-marker",{key:i,attrs:{clickable:!0,position:{lat:e.latitude,lng:e.longitude}},on:{click:function(t){e.infoDisplayed=!0}}},[s("gmap-info-window",{attrs:{opened:e.infoDisplayed},on:{closeclick:function(t){e.infoDisplayed=!1}}},[e.placeName?s("p",[s("b",[t._v(t._s(e.placeName))])]):t._e(),s("li",[t._v(t._s(e.address))]),s("li",[t._v("Checked In: "+t._s(e.checkIn))]),s("li",[t._v("Checked Out: "+t._s(e.checkOut))])])],1)})),1)],1)],1)],1)],1):t._e()],1)},ft=[],vt=(s("4160"),s("159b"),{name:"RiskyHistory",data:function(){return{api:{endpoint:"https://wherehaveibeen.azurewebsites.net",responses:[],errors:[]},mapOptions:{mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1,zoomControl:!1},center:{lat:0,lng:0},zoomLevel:12,currentPlace:null,locatingUser:!1,coords:[],hideGeolocateToolTip:!0}},computed:{userAuth:function(){return this.$store.getters.getUserAuth}},watch:{userAuth:function(){this.clearMapQuery()}},methods:{clearMapQuery:function(){this.currentPlace=null,this.$refs["autocomplete"].$el.value=""},getPosition:function(t){return{lat:parseFloat(t.lat),lng:parseFloat(t.lng)}},setPlace:function(t){this.currentPlace=t,this.zoomLevel=16,this.center.lat=this.currentPlace.geometry.location.lat(),this.center.lng=this.currentPlace.geometry.location.lng(),this.onGetCoords(this.center.lat,this.center.lng)},timeoutGeoLocate:function(){var t=this;this.geolocate(),setTimeout((function(){t.locatingUser&&(t.locatingUser=!1,t.hideGeolocateToolTip=!1)}),1e4)},geolocate:function(){var t=this;this.locatingUser=!0,navigator.geolocation.getCurrentPosition((function(e){t.zoomLevel=12,t.center={lat:e.coords.latitude,lng:e.coords.longitude},t.currentPlace={name:"Your location",lat:e.coords.latitude,lng:e.coords.longitude},t.locatingUser=!1}))},clickedOnMap:function(t){this.currentPlace={placeId:t.placeId,name:"",formatted_address:""},this.center.lat=t.latLng.lat(),this.center.lng=t.latLng.lng(),this.onGetCoords(this.center.lat,this.center.lng)},openInfoWindowTemplate:function(t){this.setInfoWindowTemplate(t),this.infoWindow.position=this.getCoordinates(t),this.infoWindow.open=!0},onGetCoords:function(t,e){var s=this;this.$http.get(this.api.endpoint+"/risk?lat="+t+"&lng="+e).then((function(t){t&&t.data&&(s.coords.length=0,t.data.forEach((function(t){t.infoDisplayed=!0,s.coords.push(t)})))})).catch((function(t){s.showSuccessAlert=!1,s.showFailureAlert=!0,s.api.errors.push(t)}))}}}),gt=vt,bt=(s("310d"),Object(y["a"])(gt,mt,ft,!1,null,"6881d308",null)),wt=bt.exports,yt={name:"App",components:{NavigationBar:A,LoginForm:U,RegisterForm:H,CheckIn:B,CheckInHistory:K,RiskyHistory:wt,Welcome:st,Confidentiality:nt,Settings:pt},data:function(){return{showCheckin:!0,showHistory:!1,showSettings:!1,showDangerMap:!1}},computed:{userLoggedIn:function(){return this.$store.getters.getUserAuth}},watch:{userLoggedIn:function(){this.hideDangerMapOnAuth(),this.showCheckin=!0}},methods:{hideDangerMapOnAuth:function(){this.showDangerMap=!1,this.displayCheckinForm()},registrationComplete:function(){this.$refs.loginTab.activate()},clearComponents:function(){this.showCheckin=!1,this.showHistory=!1,this.showSettings=!1},displayCheckinForm:function(){this.clearComponents(),this.showDangerMap=!1,this.showCheckin=!0},displayHistory:function(){this.clearComponents(),this.showDangerMap=!1,this.showHistory=!0},toggleDangerMap:function(){this.clearComponents(),this.showDangerMap=!this.showDangerMap,this.showCheckin=!this.showDangerMap},displaySettings:function(){this.clearComponents(),this.showDangerMap=!1,this.showSettings=!0}}},kt=yt,_t=(s("034f"),Object(y["a"])(kt,h,p,!1,null,null,null)),Ct=_t.exports,It=s("bc3a"),St=s.n(It),At=s("5f5b"),xt=s("ecee"),Pt=s("c074"),$t=s("ad3d");s("f9e3"),s("2dd8");i["default"].config.productionTip=!1,i["default"].prototype.$http=St.a,xt["c"].add(Pt["a"]),xt["c"].add(Pt["b"]),xt["c"].add(Pt["c"]),i["default"].component("font-awesome-icon",$t["a"]),i["default"].use(At["a"]),i["default"].use(V,{load:{key:"AIzaSyA0H6075D1zC22LDpYvYY_DEPhEYSantPM",libraries:"places"}}),new i["default"]({store:d,render:function(t){return t(Ct)}}).$mount("#app")},6415:function(t,e,s){},6683:function(t,e,s){},"6f00":function(t,e,s){},7061:function(t,e,s){},"85ec":function(t,e,s){},a704:function(t,e,s){},c0e3:function(t,e,s){"use strict";var i=s("6415"),a=s.n(i);a.a},c1e9:function(t,e,s){},edf0:function(t,e,s){},fd1d:function(t,e,s){"use strict";var i=s("6f00"),a=s.n(i);a.a}});
//# sourceMappingURL=app.c2a35627.js.map